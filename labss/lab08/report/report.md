---
## Front matter
title: "Отчёт по лабораторной работе №8"
subtitle: "Адресация IPv4 и IPv6. Настройка маршрутизации"
author: "Владимир Базлов"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true
toc-depth: 2
lof: true
lot: true
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
    - spelling=modern
    - babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: IBM Plex Serif
romanfont: IBM Plex Serif
sansfont: IBM Plex Sans
monofont: IBM Plex Mono
mathfont: STIX Two Math
mainfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
romanfontoptions: Ligatures=Common,Ligatures=TeX,Scale=0.94
sansfontoptions: Ligatures=Common,Ligatures=TeX,Scale=MatchLowercase,Scale=0.94
monofontoptions: Scale=MatchLowercase,Scale=0.94,FakeStretch=0.9
mathfontoptions:
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float}
  - \floatplacement{figure}{H}
---

# Цель работы

Изучение принципов маршрутизации в IPv4- и IPv6-сетях и принципов настройки сетевого оборудования.

# Выполнение задания

## Создание проекта и построение топологии сети

В среде GNS3 был создан новый проект. В рабочем пространстве размещены и соединены устройства в соответствии с заданной топологией: два коммутатора, четыре маршрутизатора FRR и два оконечных хоста VPCS. Топология представляет собой кольцевое соединение маршрутизаторов с подключением оконечных устройств по краям сети.

Устройствам присвоены имена в соответствии с требованиями задания:  
– PC1-vabazlov  
– PC2-vabazlov  
– msk-vabazlov-sw-01  
– msk-vabazlov-sw-02  
– msk-vabazlov-gw-01  
– msk-vabazlov-gw-02  
– msk-vabazlov-gw-03  
– msk-vabazlov-gw-04  

![Топология моделируемой сети](Screenshot_1.png){ #fig:001 width=70% }

Для анализа сетевого взаимодействия был включён захват трафика на соединениях между коммутатором msk-vabazlov-sw-01 и маршрутизатором msk-vabazlov-gw-01, а также между коммутатором msk-vabazlov-sw-02 и маршрутизатором msk-vabazlov-gw-03.

## Настройка IPv4-адресации на оконечных устройствах

На оконечных устройствах PC1 и PC2 вручную настроены IPv4-адреса в соответствии с таблицей адресации. В качестве шлюзов по умолчанию указаны адреса интерфейсов соответствующих маршрутизаторов.

![Настройка IPv4 на PC1](Screenshot_2.png){ #fig:002 width=80% }

![Настройка IPv4 на PC2](Screenshot_3.png){ #fig:003 width=80% }

## Настройка IPv4-адресации на маршрутизаторах

На маршрутизаторе msk-vabazlov-gw-01 выполнена базовая конфигурация: задано имя устройства, настроены IPv4-адреса на интерфейсах eth0, eth1 и eth2. Все интерфейсы переведены в активное состояние, конфигурация сохранена в постоянную память.

![Настройка интерфейсов msk-vabazlov-gw-01](Screenshot_4.png){ #fig:004 width=80% }

На маршрутизаторе msk-vabazlov-gw-02 настроены интерфейсы eth0 и eth1 с назначением IPv4-адресов согласно таблице адресации. После завершения настройки конфигурация сохранена.

![Настройка интерфейсов msk-vabazlov-gw-02](Screenshot_5.png){ #fig:005 width=80% }

На маршрутизаторе msk-vabazlov-gw-03 выполнена настройка интерфейсов eth0, eth1 и eth2 для обеспечения связи с оконечным устройством и соседними маршрутизаторами. Все интерфейсы активированы, конфигурация сохранена.

![Настройка интерфейсов msk-vabazlov-gw-03](Screenshot_6.png){ #fig:006 width=80% }

На маршрутизаторе msk-vabazlov-gw-04 настроены IPv4-адреса на интерфейсах eth0 и eth1, обеспечивающих соединение с маршрутизаторами msk-vabazlov-gw-03 и msk-vabazlov-gw-01. Конфигурация сохранена.

![Настройка интерфейсов msk-vabazlov-gw-04](Screenshot_7.png){ #fig:007 width=80% }

На оконечном устройстве PC1 дополнительно настроен IPv6-адрес из глобального префикса 2001:10::/64. После назначения адреса выполнена проверка параметров IPv6-конфигурации.

![Настройка IPv6 на PC1](Screenshot_8.png){ #fig:008 width=80% }

## Настройка IPv6-адресации на маршрутизаторах 

На маршрутизаторе msk-vabazlov-gw-01 включена маршрутизация IPv6 (ipv6 forwarding). На интерфейсах eth0, eth1 и eth2 настроены IPv6-адреса. Для сегмента с оконечным устройством дополнительно разрешена рассылка RA и задан префикс для IPv6 ND. Конфигурация сохранена.

![Настройка IPv6 на msk-vabazlov-gw-01](Screenshot_10.png){ #fig:010 width=80% }

На маршрутизаторе msk-vabazlov-gw-02 включена маршрутизация IPv6 и назначены IPv6-адреса на интерфейсах eth0 и eth1 согласно таблице адресации. Конфигурация сохранена.

![Настройка IPv6 на msk-vabazlov-gw-02](Screenshot_11.png){ #fig:011 width=80% }

На маршрутизаторе msk-vabazlov-gw-03 включена маршрутизация IPv6. Настроены IPv6-адреса на интерфейсах eth0, eth1 и eth2. Для сети с PC2 разрешена рассылка RA и задан префикс для IPv6 ND. Конфигурация сохранена.

![Настройка IPv6 на msk-vabazlov-gw-03](Screenshot_12.png){ #fig:012 width=80% }

На маршрутизаторе msk-vabazlov-gw-04 включена маршрутизация IPv6 и назначены IPv6-адреса на интерфейсах eth0 и eth1. Конфигурация сохранена.

![Настройка IPv6 на msk-vabazlov-gw-04](Screenshot_13.png){ #fig:013 width=80% }

## Настройка динамической маршрутизации по протоколу RIP

Для обеспечения динамического обмена маршрутной информацией между маршрутизаторами в сети был настроен протокол RIP версии 2. Данный протокол относится к дистанционно-векторным и в качестве метрики использует количество транзитных переходов. Обновления таблиц маршрутизации рассылаются каждые 30 секунд с использованием многоадресного адреса 224.0.0.9.

На маршрутизаторе msk-vabazlov-gw-01 включён протокол RIP версии 2 и добавлены в процесс маршрутизации все активные интерфейсы.

![Настройка RIP на msk-vabazlov-gw-01](Screenshot_14.png){ #fig:014 width=80% }

На маршрутизаторе msk-vabazlov-gw-02 настроен протокол RIP версии 2 с включением интерфейсов eth0 и eth1.

![Настройка RIP на msk-vabazlov-gw-02](Screenshot_15.png){ #fig:015 width=80% }

На маршрутизаторе msk-vabazlov-gw-03 в процесс RIP версии 2 добавлены интерфейсы eth0, eth1 и eth2, обеспечивающие распространение маршрутной информации по всей сети.

![Настройка RIP на msk-vabazlov-gw-03](Screenshot_16.png){ #fig:016 width=80% }

На маршрутизаторе msk-vabazlov-gw-04 выполнена настройка RIP версии 2 с добавлением интерфейсов eth0 и eth1.

![Настройка RIP на msk-vabazlov-gw-04](Screenshot_17.png){ #fig:017 width=80% }

## Проверка работы динамической маршрутизации RIP

После завершения настройки RIP была выполнена проверка корректности формирования таблиц маршрутизации и обмена маршрутами между маршрутизаторами. На маршрутизаторах отображаются маршруты, полученные по протоколу RIP, с соответствующими метриками.

![Просмотр таблицы маршрутизации RIP](Screenshot_18.png){ #fig:018 width=80% }

## Проверка связности и трассировки маршрута

Для проверки корректности маршрутизации выполнена проверка связности между оконечными устройствами. С хоста PC1 выполнена отправка ICMP-запросов на хост PC2, а также определён путь следования пакетов с использованием трассировки.

![Проверка связности между PC1 и PC2](Screenshot_19.png){ #fig:020 width=80% }

![Трассировка маршрута от PC1 к PC2](Screenshot_20.png){ #fig:021 width=80% }

## Анализ передаваемого трафика RIP

В процессе работы протокола RIP был проанализирован сетевой трафик на соединении между коммутатором и маршрутизатором. В захваченном трафике зафиксированы RIP-пакеты версии 2, передаваемые с использованием многоадресного адреса 224.0.0.9, содержащие информацию о доступных маршрутах и их метриках.

![Анализ RIP-трафика в Wireshark](Screenshot_21.png){ #fig:022 width=90% }

# Заключение

В ходе выполнения лабораторной работы была создана и настроена модель сети в среде GNS3 с использованием маршрутизаторов FRR, коммутаторов и оконечных устройств VPCS. В соответствии с заданием выполнена адресация сети по протоколам IPv4 и IPv6, что обеспечило корректное функционирование как отдельных сегментов, так и всей сети в целом.

На всех маршрутизаторах успешно настроена динамическая маршрутизация с использованием протокола RIP версии 2. Проверка таблиц маршрутизации подтвердила корректный обмен маршрутной информацией между устройствами и правильное вычисление метрик. Связность между оконечными устройствами PC1 и PC2 была подтверждена с помощью ICMP-запросов и трассировки маршрута, что свидетельствует о корректной работе протокола маршрутизации.

Дополнительно был выполнен анализ сетевого трафика, в результате которого зафиксирована передача RIP-обновлений с использованием многоадресного адреса 224.0.0.9, что соответствует спецификации протокола RIPv2. Полученные результаты подтверждают правильность настройки адресации и динамической маршрутизации в моделируемой сети.
